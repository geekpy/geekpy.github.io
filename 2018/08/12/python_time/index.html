<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>史上最详解Python日期和时间处理（上） | Geekpy's Blog</title><link rel="stylesheet" type="text/css" href="/css/normalize.css"><link rel="stylesheet" type="text/css" href="/css/highlight.css"><link rel="stylesheet" type="text/css" href="/css/very-simple.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><!-- include the sidebar--><!-- include ./includes/sidebar.jade--><!-- Blog title and subtitle--><header><div class="container header"><a id="logo" href="/." class="title">Geekpy's Blog</a><span class="subtitle"></span><label id="toggle-menu" for="menu" onclick><i class="fa fa-bars"></i></label></div></header><!-- use checkbox hack for toggle nav-bar on small screens--><input id="menu" type="checkbox"><!-- Navigation Links--><nav id="nav"><div class="container"><a href="/" class="sidebar-nav-item active">Home</a><a href="/archives" class="sidebar-nav-item">Archives</a><a href="/about" class="sidebar-nav-item">About</a></div></nav><div id="header-margin-bar"></div><div class="wrapper"><div class="container post-header"><h1>史上最详解Python日期和时间处理（上）</h1></div></div><article><div class="container post"><p>好吧，我承认这有标题党的嫌疑，不过看了那么多文章，的确没有找到一篇让我满意的关于日期和时间处理的详解文章，于是决心自己动手亲写一篇，希望能对得起这个霸气的标题。言归正传，在Python编程中，日期和时间处理是非常繁琐的一块，不仅概念众多，且有很多不同的module, 尤其涉及时区处理的时候会将问题进一步复杂化。本文将对Python在日期和时间处理上进行一步步详细讲解，总共会分为上下两篇，其中时区处理是较为棘手的一块内容，单独拿出来作为下篇。此上篇将主要讲解时间和日期处理中的基本概念，和常用的场景。</p>
<p>&lt;!--more--&gt;</p>
<p>本篇目录如下：</p>
<ul>
<li><a href="#%E6%97%B6%E9%97%B4%E5%92%8C%E6%97%A5%E6%9C%9F%E7%9A%84%E8%A1%A8%E7%A4%BA">时间和日期的表示</a>
<ul>
<li><a href="#%E6%97%B6%E9%97%B4%E3%80%81%E6%97%A5%E6%9C%9F%E5%AF%B9%E8%B1%A1">时间、日期对象</a></li>
<li><a href="#%E6%97%B6%E9%97%B4%E6%88%B3">时间戳</a></li>
<li><a href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%AD%97%E7%AC%A6%E4%B8%B2">日期时间字符串</a></li>
</ul>
</li>
<li><a href="#%E6%97%A5%E6%9C%9F%E6%97%B6%E9%97%B4%E5%A4%84%E7%90%86%E5%9C%BA%E6%99%AF">日期时间处理场景</a>
<ul>
<li><a href="#%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%97%B6%E9%97%B4">获取当前时间</a></li>
<li><a href="#%E8%8E%B7%E5%8F%96%E7%89%B9%E5%AE%9A%E6%97%B6%E9%97%B4">获取特定时间</a></li>
<li><a href="#%E4%B8%8D%E5%90%8C%E6%97%B6%E9%97%B4%E8%A1%A8%E7%A4%BA%E7%9A%84%E8%BD%AC%E5%8C%96">不同时间表示的转化</a></li>
</ul>
</li>
</ul>
<h2>时间和日期的表示</h2>
<p>在Python中表示日期和时间，最基本的有三种形式：</p>
<ul>
<li>时间、日期对象(Object)</li>
<li>时间戳(Timestamp)</li>
<li>字符串(String)</li>
</ul>
<p>在这三种基本形式中又会衍生出一些其它的概念，下面来分别讲解下：</p>
<p>先看张脑图来理清它们之间的关系
<img src="https://upload-images.jianshu.io/upload_images/3959253-06d2eac8083f8c93.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.1-python日期与时间的表示"></p>
<h4>时间、日期对象</h4>
<p>Python中用于表示日期和时间的对象有很多种，在详细讲解这些对象之前先要明确一个概念，<strong>即这些对象都分为两种：一种是&quot;原始的(naive)&quot;，另一种是&quot;有知的(aware)&quot;</strong>。区别在于原始的时间没有时区概念，只是单纯的表示一个日期和时间，而有知的时间会包含一些额外信息，如时区，是否夏令时等信息，而这些信息会通过tzinfo子类来进行封装，我们将在（下）中详细讲解。</p>
<ul>
<li>
<p>datetime对象：这个是最常用的日期时间对象，可以即表示日期又表示时间。datetime对象可以直接用于日期和时间相关的计算（比如计算5天之前的时间）。另外，datetime既可以表示原始时间，也可以表示有知时间，如果要表示有知时间，则在初始化时需要传递tzinfo类型的参数。
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [16]: import datetime</span><br><span class="line"></span><br><span class="line">In [17]: datetime.datetime.now() # 返回一个datetime对象</span><br><span class="line">Out[17]: datetime.datetime(2018, 7, 28, 11, 17, 38, 972555)</span><br><span class="line"></span><br><span class="line"># 也可以直接初始化一个datetime对象</span><br><span class="line">In [20]: datetime.datetime(2018, 7, 5, 10, 20)</span><br><span class="line">Out[20]: datetime.datetime(2018, 7, 5, 10, 20)</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>time对象：与datetime类似，但只用于表示时间，不表示日期
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 这里初始化一个datetime.time对象用于表示时间11点28分05秒</span><br><span class="line">In [19]: datetime.time(11, 28, 5)</span><br><span class="line">Out[19]: datetime.time(11, 28, 5)</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>date对象：与datetime类似，但只表示日期，不表示时间
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [23]: datetime.date(2018, 07, 10)</span><br><span class="line">Out[23]: datetime.date(2018, 7, 10)</span><br></pre></td></tr></table></figure></p>
</li>
<li>
<p>time tuple: time tuple又叫struct time，是一种用于表示日期和时间的数据结构，此数据结构主要用于time module中的相关函数。time tuple中有9个元素，如下表所示：</p>
<table>
<thead>
<tr>
<th>索引(Index)</th>
<th>属性(Attribute)</th>
<th>值(Values)</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>tm_year(年)</td>
<td>比如2011</td>
</tr>
<tr>
<td>1</td>
<td>tm_mon(月)</td>
<td>1 - 12</td>
</tr>
<tr>
<td>2</td>
<td>tm_mday(日)</td>
<td>1 - 31</td>
</tr>
<tr>
<td>3</td>
<td>tm_hour(时)</td>
<td>0 - 23</td>
</tr>
<tr>
<td>4</td>
<td>tm_min(分)</td>
<td>0 - 59</td>
</tr>
<tr>
<td>5</td>
<td>tm_sec(秒)</td>
<td>0 - 61</td>
</tr>
<tr>
<td>6</td>
<td>tm_wday(weekday)</td>
<td>0 - 6(0表示周日)</td>
</tr>
<tr>
<td>7</td>
<td>tm_yday(一年中的第几天)</td>
<td>1 - 366</td>
</tr>
<tr>
<td>8</td>
<td>tm_isdst(是否是夏令时)</td>
<td>默认为-1</td>
</tr>
</tbody>
</table>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">In [21]: import time</span><br><span class="line"></span><br><span class="line">In [22]: time.localtime()  # 返回一个time tuple用于表示当前时间的local time</span><br><span class="line">Out[22]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=11,   tm_min=26, tm_sec=19, tm_wday=5, tm_yday=209, tm_isdst=0)</span><br></pre></td></tr></table></figure></p>
</li>
</ul>
<p>总结：以上前三个对象(datetime, date, time)均来自datetime module（注意区分datetime module和datetime 对象），而最后一个time tuple主要用于time module中的相关操作。</p>
<h4>时间戳</h4>
<p>时间戳(Timestamp)是表示当前时间距离元年时间(epoch, 1970年1月1日00:00:00 UTC)的偏移量，这个偏移量在Python中用秒数来计算，但有些编程语言如JavaScript是用毫秒来计算的，需要注意。**另外需要知道时间戳没有时区概念，是不分时区的。**这就是为什么我们在数据库中通常存储的是时间戳，当需要向用户显示时间的时候，再转化为对应时区的时间。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 获取当前时间的时间戳</span><br><span class="line">In [24]: time.time()</span><br><span class="line">Out[24]: 1532750668.210267</span><br></pre></td></tr></table></figure></p>
<h4>日期时间字符串</h4>
<p>通常在需要向用户展示时间的时候，我们都需要将时间戳或者时间对象转化为字符串形式，从而在标准输出中能够打印出相应的时间。我们可以通过将时间戳或者对象进行转化和格式化来得到相应的字符串。需要说明的是，字符串表示时间有一个标准形式称为<a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener">ISO8601</a>，可以通过专门的函数来获得。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">In [29]: dt = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line"># 获取ISO8601标准时间字符串</span><br><span class="line">In [30]: dt.isoformat()</span><br><span class="line">Out[30]: &apos;2018-07-28T12:11:33.582380&apos;</span><br><span class="line"></span><br><span class="line"># 自定义格式的时间字符串</span><br><span class="line">In [31]: dt.strftime(&quot;%Y%m%d-%H:%M:%S&quot;)</span><br><span class="line">Out[31]: &apos;20180728-12:11:33&apos;</span><br></pre></td></tr></table></figure></p>
<h2>日期时间处理场景</h2>
<p>时间处理主要有以下几个场景：</p>
<ul>
<li>获取当前时间</li>
<li>获取特定时间：例如获取5天前的时间。</li>
<li>不同时间表示的转化：例如将datetime对象转化为时间字符串</li>
<li>时区处理：这个将在《下篇》中详细讲述</li>
</ul>
<p>下面分别介绍下这几种处理场景：</p>
<h4>获取当前时间</h4>
<p>获取当前时间可以通过获取datetime对象、时间戳或time tuple三种方式来获取。</p>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 最常用的获取当前日期时间的方法，其有一个tz参数用于设置时区，默认为None，所以最终获取的是一个原始naive时间</span><br><span class="line">In [36]: dt = datetime.datetime.now()</span><br><span class="line"></span><br><span class="line"># 注意获取的是当地时间的时间表示，但其本身是一个原始naive时间</span><br><span class="line">In [37]: dt</span><br><span class="line">Out[37]: datetime.datetime(2018, 7, 28, 12, 58, 57, 676468)</span><br><span class="line"></span><br><span class="line"># 获取当前时间的UTC时间表示，注意这仍然是一个原始naive时间，也就是用当前的UTC时间4点59分32秒来构造一个naive时间对象，但这个对象并没有包含时区信息</span><br><span class="line">In [38]: utc_now = datetime.datetime.utcnow()</span><br><span class="line"></span><br><span class="line">In [39]: utc_now</span><br><span class="line">Out[39]: datetime.datetime(2018, 7, 28, 4, 59, 32, 258087)</span><br><span class="line"></span><br><span class="line"># 获取当前时间的时间戳</span><br><span class="line">In [40]: time.time()</span><br><span class="line">Out[40]: 1532753948.563503</span><br><span class="line"></span><br><span class="line"># 获取当地时间的time tuple</span><br><span class="line">In [41]: time.localtime()</span><br><span class="line">Out[41]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=13, tm_min=0, tm_sec=2, tm_wday=5, tm_yday=209, tm_isdst=0)</span><br></pre></td></tr></table></figure></p>
<h4>获取特定时间</h4>
<p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [42]: dt</span><br><span class="line">Out[42]: datetime.datetime(2018, 7, 28, 12, 58, 57, 676468)</span><br><span class="line"></span><br><span class="line"># 获取两天前的时间</span><br><span class="line">In [43]: dt - datetime.timedelta(days=2)</span><br><span class="line">Out[43]: datetime.datetime(2018, 7, 26, 12, 58, 57, 676468)</span><br><span class="line"></span><br><span class="line"># 获取一周前的时间</span><br><span class="line">In [44]: dt - datetime.timedelta(weeks=1)</span><br><span class="line">Out[44]: datetime.datetime(2018, 7, 21, 12, 58, 57, 676468)</span><br><span class="line"></span><br><span class="line"># 获取3小时前的时间</span><br><span class="line">In [45]: dt - datetime.timedelta(hours=3)</span><br><span class="line">Out[45]: datetime.datetime(2018, 7, 28, 9, 58, 57, 676468)</span><br></pre></td></tr></table></figure></p>
<p>通过timedelta基本可以满足我们获取特定时间的需求，但是这里不涉及时区相关的转化。而且只是原始naive时间之间的转化</p>
<h4>不同时间表示的转化</h4>
<p>先来看一张关系图：
<img src="https://upload-images.jianshu.io/upload_images/3959253-837fe6ec315f069e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="1.2-不同时间表示的关系图"></p>
<p>从上图可以看出总共有5对关系，每对关系都是可以双向转化的(除timetuple无法直接转化为datetime，需要先转化为timestamp或者time string)，所以总共有9种转化，下面将分别介绍下它们之间是如何互相转化的。</p>
<h5>datetime object &amp; timestamp</h5>
<p>从时间戳timestamp ==&gt; datetime object
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">In [2]: import time</span><br><span class="line"></span><br><span class="line">In [3]: from datetime import datetime</span><br><span class="line"></span><br><span class="line">In [4]: ts = time.time()</span><br><span class="line"></span><br><span class="line"># 直接通过fromtimestamp就可以获得时间戳对应的datetime对象</span><br><span class="line">In [5]: dt = datetime.fromtimestamp(ts)</span><br><span class="line"></span><br><span class="line">In [6]: ts</span><br><span class="line">Out[6]: 1532775234.192805</span><br><span class="line"></span><br><span class="line"># 注意这个datetime对象获取的是本地时间的表示，但是仍然是原始naive time</span><br><span class="line">In [7]: dt</span><br><span class="line">Out[7]: datetime.datetime(2018, 7, 28, 18, 53, 54, 192805)</span><br><span class="line"></span><br><span class="line"># 获取对应utc的时间表示，仍然是原始naive时间</span><br><span class="line">In [11]: utc_dt = datetime.utcfromtimestamp(ts)</span><br><span class="line">In [12]: utc_dt</span><br><span class="line">Out[12]: datetime.datetime(2018, 7, 28, 10, 53, 54, 192805)</span><br></pre></td></tr></table></figure></p>
<p>从datetime object ==&gt;时间戳timestamp
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># 定义一个函数用于返回datetime object对应的时间戳</span><br><span class="line">In [8]: def get_timestamp(datetime_obj):</span><br><span class="line">   ...:     if not isinstance(datetime_obj, datetime):</span><br><span class="line">   ...:         raise ValueError()</span><br><span class="line">   ...:     return (datetime_obj - datetime(1970, 1, 1)).total_seconds()</span><br><span class="line">   ...:</span><br><span class="line"></span><br><span class="line">In [9]: get_timestamp(dt)</span><br><span class="line">Out[9]: 1532804034.192805</span><br><span class="line"></span><br><span class="line"># 也可以先转化为time tuple，再通过mktime函数转化为timestamp，但是精度不如上一版高</span><br><span class="line">In [13]: def get_timestamp_v2(datetime_obj):</span><br><span class="line">    ...:     if not isinstance(datetime_obj, datetime):</span><br><span class="line">    ...:         raise ValueError()</span><br><span class="line">    ...:     return time.mktime(datetime_obj.timetuple())</span><br><span class="line">    ...:</span><br><span class="line"></span><br><span class="line">In [14]: get_timestamp_v2(dt)</span><br><span class="line">Out[14]: 1532775234.0</span><br></pre></td></tr></table></figure></p>
<h5>datetime object &amp; time string</h5>
<p>datetime object ==&gt; time string
关于格式化的说明可以参考<a href="https://docs.python.org/2/library/datetime.html#strftime-and-strptime-behavior" target="_blank" rel="noopener">官网文档</a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">In [15]: dt</span><br><span class="line">Out[15]: datetime.datetime(2018, 7, 28, 18, 53, 54, 192805)</span><br><span class="line"></span><br><span class="line"># 自定义格式</span><br><span class="line">In [16]: dt.strftime(&quot;%Y-%m-%dT%H:%M:%S&quot;)</span><br><span class="line">Out[16]: &apos;2018-07-28T18:53:54&apos;</span><br><span class="line"></span><br><span class="line"># 转化为ISO8601格式字符串的快捷方式</span><br><span class="line">In [17]: dt.isoformat()</span><br><span class="line">Out[17]: &apos;2018-07-28T18:53:54.192805&apos;</span><br></pre></td></tr></table></figure></p>
<p>time string ==&gt; datetime object
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">In [18]: time_str = &apos;2018-07-28T18:53:54&apos;</span><br><span class="line"></span><br><span class="line">In [19]: dt2 = datetime.strptime(time_str, &quot;%Y-%m-%dT%H:%M:%S&quot;)</span><br><span class="line"></span><br><span class="line">In [20]: dt2</span><br><span class="line">Out[20]: datetime.datetime(2018, 7, 28, 18, 53, 54)</span><br></pre></td></tr></table></figure></p>
<h5>datetime object &amp; time tuple</h5>
<p>datetime object ==&gt; time tuple
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">In [21]: dt.timetuple()</span><br><span class="line">Out[21]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=18, tm_min=53, tm_sec=54, tm_wday=5, tm_yday=209, tm_isdst=-1)</span><br></pre></td></tr></table></figure></p>
<p>time tuple ==&gt; datetime object
无法直接转化，需要先转化为time str或者timestamp</p>
<h5>time tuple &amp; timestamp</h5>
<p>time tuple ==&gt; timestamp
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">In [25]: time_tuple</span><br><span class="line">Out[25]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=18, tm_min=53, tm_sec=54, tm_wday=5, tm_yday=209, tm_isdst=-1)</span><br><span class="line"></span><br><span class="line"># 注意：该函数精度只能到秒</span><br><span class="line">In [26]: ts = time.mktime(time_tuple)</span><br><span class="line"></span><br><span class="line">In [27]: ts</span><br><span class="line">Out[27]: 1532775234.0</span><br></pre></td></tr></table></figure></p>
<p>timestamp ==&gt; time tuple
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">In [27]: ts</span><br><span class="line">Out[27]: 1532775234.0</span><br><span class="line"></span><br><span class="line"># 转为本地时间的time tuple表示，</span><br><span class="line">In [29]: tt = time.localtime(ts)</span><br><span class="line"></span><br><span class="line">In [30]: tt</span><br><span class="line">Out[30]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=18, tm_min=53, tm_sec=54, tm_wday=5, tm_yday=209, tm_isdst=0)</span><br><span class="line"></span><br><span class="line"># 转为UTC时间的time tuple表示</span><br><span class="line">In [31]: utc_tt = time.gmtime(ts)</span><br><span class="line"></span><br><span class="line">In [32]: utc_tt</span><br><span class="line">Out[32]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=10, tm_min=53, tm_sec=54, tm_wday=5, tm_yday=209, tm_isdst=0)</span><br></pre></td></tr></table></figure></p>
<h5>time tuple &amp; time string</h5>
<p>time tuple ==&gt; time string
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">In [33]: tt</span><br><span class="line">Out[33]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=18, tm_min=53, tm_sec=54, tm_wday=5, tm_yday=209, tm_isdst=0)</span><br><span class="line"></span><br><span class="line"># 注意：这里strftime并非time tuple的方法，而是time module下的函数</span><br><span class="line">In [34]: tt.strftime(&quot;%Y-%m-%dT%H:%M:%S&quot;)</span><br><span class="line">---------------------------------------------------------------------------</span><br><span class="line">AttributeError                            Traceback (most recent call last)</span><br><span class="line">&lt;ipython-input-34-1be0f512fc77&gt; in &lt;module&gt;()</span><br><span class="line">----&gt; 1 tt.strftime(&quot;%Y-%m-%dT%H:%M:%S&quot;)</span><br><span class="line"></span><br><span class="line">AttributeError: &apos;time.struct_time&apos; object has no attribute &apos;strftime&apos;</span><br><span class="line"></span><br><span class="line"># 如下是正解</span><br><span class="line">In [35]: time.strftime(&quot;%Y-%m-%dT%H:%M:%S&quot;, tt)</span><br><span class="line">Out[35]: &apos;2018-07-28T18:53:54&apos;</span><br></pre></td></tr></table></figure></p>
<p>time string ==&gt; time tuple
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">In [36]: time_str</span><br><span class="line">Out[36]: &apos;2018-07-28T18:53:54&apos;</span><br><span class="line"></span><br><span class="line">In [37]: tt = time.strptime(time_str, &quot;%Y-%m-%dT%H:%M:%S&quot;)</span><br><span class="line"></span><br><span class="line">In [38]: tt</span><br><span class="line">Out[38]: time.struct_time(tm_year=2018, tm_mon=7, tm_mday=28, tm_hour=18, tm_min=53, tm_sec=54, tm_wday=5, tm_yday=209, tm_isdst=-1)</span><br></pre></td></tr></table></figure></p>
<h5>timestamp &amp; time string</h5>
<p>无法相互转化，只能通过先转化为datetime object或者time tuple之后才能再转化</p>
<h2>References</h2>
<ul>
<li><a href="https://docs.python.org/2/library/time.html" target="_blank" rel="noopener">time module document</a></li>
<li><a href="https://docs.python.org/2/library/datetime.html" target="_blank" rel="noopener">datetime module document</a></li>
<li><a href="https://medium.com/@eleroy/10-things-you-need-to-know-about-date-and-time-in-python-with-datetime-pytz-dateutil-timedelta-309bfbafb3f7" target="_blank" rel="noopener">10 things you need to know about Date and Time in Python</a></li>
<li><a href="http://www.wklken.me/posts/2015/03/03/python-base-datetime.html" target="_blank" rel="noopener">PYTHON-基础-时间日期处理小结</a></li>
</ul>
</div><div class="container"><hr><div class="comment"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
<script src="//cdn.jsdelivr.net/npm/valine@1.1.6/dist/Valine.min.js"></script>
<script type="text/javascript">
var leancloud_appid = 'OCjgmQiFa9gpVkDabM6KTb8g-gzGzoHsz';
var leancloud_appkey = 'Ie7XE2V6spB6Q6C1W2GU9drV';
var valine_url = 'http://yoursite.com/2018/08/12/python_time/';
var valine_notify = false;
var valine_verify = false;
var valine_placeholder = '';
new Valine({
         av: AV, // source from av-min.js
         el: '.comment' ,
         notify: valine_notify,
         verify: valine_verify,
         app_id: leancloud_appid,
         app_key: leancloud_appkey,
         placeholder: valine_placeholder,
         path: valine_url
     });
</script></div></article><footer id="footer"><div class="container"><div class="bar"><div class="social"><a href="mailto:rebor.liu@gmail.com" target="_blank"><i class="fa fa-envelope-o"></i></a><a href="https://github.com/geekpy" target="_blank"><i class="fa fa-github"></i></a></div><div class="footer">© 2018 <a href="/" rel="nofollow">geekpy</a>. Powered by <a rel="nofollow" target="_blank" href="https://hexo.io">Hexo</a>. Theme <a target="_blank" href="https://github.com/lotabout/very-simple">very-simple</a>.</div></div></div></footer><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.css"><script src="//cdn.bootcss.com/jquery/2.0.3/jquery.min.js"></script><script src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js"></script><script>$(document).ready(function() {
    $(".fancybox").fancybox();
});
</script></body></html>